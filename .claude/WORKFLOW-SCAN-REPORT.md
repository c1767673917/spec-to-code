# ä»“åº“å·¥ä½œæµæ‰§è¡Œæ–¹å¼æ‰«æåˆ†ææŠ¥å‘Š

**ç”Ÿæˆæ—¥æœŸ**: 2025-11-24
**é¡¹ç›®**: Spec-to-Codeï¼ˆéœ€æ±‚é©±åŠ¨å¼€å‘ä¸é”™è¯¯ä¿®å¤å·¥ä½œæµï¼‰
**åˆ†æèŒƒå›´**: å®Œæ•´å·¥ä½œæµæ¶æ„ã€æ‰§è¡Œæƒé™åˆ†é…ã€äº§ç‰©è§„èŒƒ

---

## ğŸ“Š ä»“åº“æ¦‚è§ˆ

- **é¡¹ç›®åç§°**: Spec-to-Codeï¼ˆéœ€æ±‚é©±åŠ¨å¼€å‘ä¸é”™è¯¯ä¿®å¤å·¥ä½œæµï¼‰
- **æ ¸å¿ƒå·¥ä½œæµ**: 2 ä¸ªï¼ˆRequirements-Pilot + Bugfixï¼‰
- **æ™ºèƒ½ä½“**: 6 ä¸ªï¼ˆ4 ä¸ªç”¨äº Requirementsï¼Œ2 ä¸ªç”¨äº Bugfixï¼‰
- **å‘½ä»¤**: 2 ä¸ªï¼ˆ/requirements-pilot å’Œ /bugfixï¼‰
- **æ–‡æ¡£æ€»æ•°**: 11 ä¸ª Markdown æ–‡ä»¶

---

## ğŸ“‹ WORKFLOW 1: Requirements-Pilotï¼ˆéœ€æ±‚é©±åŠ¨å¼€å‘ï¼‰

### å…¥å£å‘½ä»¤

```bash
/requirements-pilot <FEATURE_DESCRIPTION> [--skip-tests] [--skip-scan]
```

**èŒè´£**: åè°ƒæ•´ä¸ªå·¥ä½œæµï¼Œç”±ä¸» Agent æ‰§è¡Œ

### æµç¨‹æ­¥éª¤ä¸æ‰§è¡Œæ–¹å¼

| æ­¥éª¤ | æè¿° | æ‰§è¡Œæ–¹å¼ | å­æˆåˆ† |
|------|------|--------|-------|
| **1. ä»“åº“æ‰«æ** | åˆ†æä»“åº“ç»“æ„ã€æ ˆã€ä¾èµ– | **ä¸» Agent** | äº§å‡ºï¼š`00-repo-scan.md` |
| **2. éœ€æ±‚ç”Ÿæˆ** | ä¸ç”¨æˆ·äº¤äº’æ¾„æ¸…ï¼Œç”Ÿæˆéœ€æ±‚æ–‡æ¡£ï¼ˆâ‰¥90åˆ†ï¼‰ | **Sub-Agent: `requirements-generate`** | æ–‡æ¡£ï¼š`01-requirements.md` |
|  | åˆç¨¿å¯å§”æ‰˜ sub-agentï¼Œä½†æ‰€æœ‰ä¿®æ”¹/è¯„åˆ†ç”± `requirements-generate` æ‰‹åŠ¨æ‰§è¡Œ | **ä¸»å¯¼ï¼šMain Agent + Sub** | æ ‡å‡†ï¼š90/100 åˆ†æ•°åˆ¶ |
| **3. æ¶æ„è®¾è®¡** | è®¾è®¡æ¶æ„éª¨æ¶ï¼Œæäº¤ç”¨æˆ·ç¡®è®¤ï¼Œäº¤ Codex æ‰©å†™ | **Sub-Agent: `requirements-generate`** | éª¨æ¶è‰ç¨¿ â†’ ç”¨æˆ·ç¡®è®¤ |
|  | Codex æ‰©å†™å®Œæ•´æ¶æ„ | **Codex Skill** | äº§å‡ºï¼š`02-architecture.md` |
|  | Agent è¯„åˆ†ã€ä¿®æ”¹ã€ç¡®è®¤ï¼ˆâ‰¥90åˆ†ï¼‰ | **Sub-Agent: `requirements-generate`** | æ ‡å‡†ï¼š90/100 åˆ†æ•°åˆ¶ |
| **4. ä»£ç å®ç°** | Codex å®ç°æ‰€æœ‰å‰åç«¯ä»£ç å’Œæµ‹è¯• | **Codex Skill** | äº§å‡ºï¼š`codex-backend.md`ï¼ˆå« Structured Summary JSONï¼‰ |
|  | ç¼–æ’ Codex å®ç° | **Sub-Agent: `requirements-code`** | æ— ä»£ç ç¼–è¾‘ï¼Œä»…ç¼–æ’ |
| **5. ä»£ç å®¡æŸ¥** | Codex æ‰§è¡Œä»£ç å®¡æŸ¥ | **Codex Skill** | äº§å‡ºï¼š`codex-review.md` |
|  | ç¼–æ’ã€å¾ªç¯ä¿®å¤ï¼ˆâ‰¤3 æ¬¡ï¼‰ | **Sub-Agent: `requirements-review`** | è¯„åˆ†ï¼šâ‰¥90 åˆ† |
| **6. æµ‹è¯•éªŒè¯** | Codex æ‰§è¡Œ/æ–°å¢æµ‹è¯• | **Codex Skill** | æ›´æ–°ï¼š`codex-backend.md` |
|  | ç¼–æ’æµ‹è¯•ï¼Œè®°å½•ç»“æœ | **Sub-Agent: `requirements-testing`** | å¯è·³è¿‡ï¼ˆ--skip-testsï¼‰ |
| **7. æ”¶å°¾** | éªŒè¯æ‰€æœ‰äº§ç‰©å­˜åœ¨ï¼ŒStructured Summary çŠ¶æ€é `failed` | **Sub-Agent: `requirements-code`** | æ ‡å‡†ï¼šå®Œæ•´æ€§æ£€æŸ¥ |

---

## ğŸ“‹ WORKFLOW 2: Bugfixï¼ˆç³»ç»ŸåŒ–é”™è¯¯ä¿®å¤ï¼‰

### å…¥å£å‘½ä»¤

```bash
/bugfix <ERROR_DESCRIPTION> [--skip-scan] [--skip-tests]
```

**èŒè´£**: åè°ƒé”™è¯¯ä¿®å¤æµç¨‹ï¼Œç”±ä¸» Agent æ‰§è¡Œ

### æµç¨‹æ­¥éª¤ä¸æ‰§è¡Œæ–¹å¼

| æ­¥éª¤ | æè¿° | æ‰§è¡Œæ–¹å¼ | å­æˆåˆ† |
|------|------|--------|-------|
| **1. ä»“åº“æ‰«æ** | åˆ†æä»“åº“ä¸Šä¸‹æ–‡ | **ä¸» Agent** | äº§å‡ºï¼š`00-repo-scan.md` |
| **2. é—®é¢˜ç¡®è®¤** | æ”¶é›†æ—¥å¿—ã€å¤ç°æ­¥éª¤ã€æ˜ç¡®èŒƒå›´ | **ä¸» Agent** | æ–‡æ¡£ï¼šé—®é¢˜æè¿° |
| **3. Codex ä¿®å¤** | å®ç°é”™è¯¯ä¿®å¤å’Œæµ‹è¯• | **Codex Skill** | äº§å‡ºï¼š`codex-backend.md` |
|  | ç¼–æ’ Codex ä¿®å¤ | **Sub-Agent: `bugfix`** | æ— ä»£ç ç¼–è¾‘ï¼Œä»…ç¼–æ’ |
| **4. ä¿®å¤éªŒè¯** | Codex æ‰§è¡Œä»£ç å®¡æŸ¥ | **Codex Skill** | äº§å‡ºï¼š`codex-review.md` |
|  | ç¼–æ’å®¡æŸ¥ï¼Œå¾ªç¯ä¿®å¤ï¼ˆâ‰¤3 æ¬¡ï¼‰ | **Sub-Agent: `bugfix-verify`** | è¯„åˆ†ï¼šâ‰¥90 åˆ† |
| **5. æµ‹è¯•éªŒè¯** | Codex æ‰§è¡Œ/æ–°å¢æµ‹è¯• | **Codex Skill** | æ›´æ–°ï¼š`codex-backend.md` |
|  | å¯è·³è¿‡ï¼ˆ--skip-testsï¼‰ | **å¯é€‰** | - |
| **6. æ”¶å°¾** | éªŒè¯äº§ç‰©å®Œæ•´ï¼ŒçŠ¶æ€é `failed` | **Sub-Agent: `bugfix`** | å®Œæ•´æ€§æ£€æŸ¥ |

---

## ğŸ§  Codex Skillï¼ˆä»£ç æ‰§è¡Œå±‚ï¼‰

### å¼ºåˆ¶é€‚ç”¨åœºæ™¯ï¼ˆRequirements + Bugfix éƒ½ç”¨ï¼‰

| ä»£ç ç±»å‹ | æ‰§è¡Œæƒé™ |
|---------|--------|
| RESTful APIã€GraphQLã€æ•°æ®åº“æ“ä½œã€ä¸šåŠ¡é€»è¾‘ | **Codex ä¸“å±** |
| ä»£ç å®¡æŸ¥ã€æµ‹è¯•ç”Ÿæˆã€æ€§èƒ½ä¼˜åŒ– | **Codex ä¸“å±** |
| å‰ç«¯/åç«¯å®ç°ã€ä¸­é—´ä»¶ã€æœåŠ¡å±‚ | **Codex ä¸“å±** |
| **ä»»ä½•ä»£ç ç¼–è¾‘** | **ç»å¯¹ç¦æ­¢ Agent ç¼–è¾‘** â›” |

### Codex è¾“å‡ºäº§ç‰©

- `codex-backend.md` - å« Structured Summary JSONï¼ˆå¿…é¡»ï¼‰
- `api-docs.md` - è‹¥ API å˜æ›´ï¼ˆå¿…é¡»ï¼‰
- `codex-review.md` - ä»£ç å®¡æŸ¥æŠ¥å‘Šï¼ˆå¿…é¡»ï¼‰
- `dev-notes.md` - ä»…å½“æœ‰æ–°çš„æ¾„æ¸…éœ€æ±‚ï¼ˆå¯é€‰ï¼‰

---

## ğŸ” Sub-Agent èŒè´£æ˜ç»†

| Sub-Agent | å·¥ä½œæµ | èŒè´£ | ç¼–æ’æ–¹å¼ |
|-----------|------|------|--------|
| **requirements-generate** | Requirements | éœ€æ±‚æ–‡æ¡£ç¼–å†™ã€æ¶æ„éª¨æ¶è®¾è®¡ã€æ‰‹åŠ¨è¯„åˆ†å’Œæ¾„æ¸…å¾ªç¯ | Task å·¥å…·ï¼ˆsubagent_typeï¼‰ |
| **requirements-code** | Requirements | ç¼–æ’ Codex å®ç°ä»£ç å’Œæµ‹è¯• | Task å·¥å…· |
| **requirements-review** | Requirements | ç¼–æ’ Codex ä»£ç å®¡æŸ¥ï¼Œå¤„ç†åé¦ˆå¾ªç¯ | Task å·¥å…· |
| **requirements-testing** | Requirements | ç¼–æ’ Codex è¿è¡Œæµ‹è¯•ï¼Œè®°å½•ç»“æœ | Task å·¥å…· |
| **bugfix** | Bugfix | é—®é¢˜åˆ†æã€ç¼–æ’ Codex ä¿®å¤ | Task å·¥å…· |
| **bugfix-verify** | Bugfix | ç¼–æ’ Codex éªŒè¯ä¿®å¤è´¨é‡ | Task å·¥å…· |

---

## âš ï¸ å…³é”®é™åˆ¶ä¸è§„åˆ™

### âœ… å…è®¸çš„ Agent æ“ä½œ

- æ–‡æ¡£ç¼–å†™ï¼ˆéœ€æ±‚ã€æ¶æ„ã€ç¬”è®°ï¼‰
- ç¼–æ’ Codex è°ƒç”¨
- è´¨é‡è¯„åˆ†å’Œé—¨æ§
- ä»“åº“æ‰«æåˆ†æ
- æµ‹è¯•ç»“æœè®°å½•

### âŒ ç¦æ­¢çš„ Agent æ“ä½œ

- ç›´æ¥ç¼–è¾‘ä»£ç æ–‡ä»¶
- æ‰‹åŠ¨ä»£ç å®¡æŸ¥
- ä¿®æ”¹ Codex äº§ç‰©ï¼ˆé™¤éé‡æ–°è°ƒç”¨ Codexï¼‰
- è·³è¿‡è´¨é‡é—¨æ§ï¼ˆ90åˆ†é˜ˆå€¼ï¼‰
- è¶…è¿‡ 3 æ¬¡è¿­ä»£å¾ªç¯ï¼ˆéœ€å‡çº§ï¼‰

---

## ğŸ“ å·¥ä½œæµäº§ç‰©æ ‡å‡†ç»“æ„

```
.claude/specs/{feature_name}/
â”œâ”€â”€ 00-repo-scan.md              # ä»“åº“ä¸Šä¸‹æ–‡ï¼ˆMain Agentï¼‰
â”œâ”€â”€ 01-requirements.md           # éœ€æ±‚æ–‡æ¡£ â‰¥90åˆ†ï¼ˆSub-Agentï¼‰
â”œâ”€â”€ 02-architecture.md           # æ¶æ„æ–‡æ¡£ â‰¥90åˆ†ï¼ˆCodex æ‰©å†™ + Sub-Agent è¯„åˆ†ï¼‰
â”œâ”€â”€ codex-backend.md             # Codex å®ç°æ—¥å¿— + JSONï¼ˆCodex å¿…é¡»ï¼‰
â”œâ”€â”€ codex-review.md              # ä»£ç å®¡æŸ¥æŠ¥å‘Šï¼ˆCodex å¿…é¡»ï¼‰
â”œâ”€â”€ api-docs.md                  # API æ–‡æ¡£ï¼ˆCodex å¯é€‰ï¼‰
â””â”€â”€ dev-notes.md                 # æ¾„æ¸…ç¬”è®°ï¼ˆAgent å¯é€‰ï¼‰
```

---

## âš¡ æ‰§è¡Œæ¨¡å¼æ€»ç»“

| æ‰§è¡Œå¯¹è±¡ | å æ¯” | ä¸»è¦èŒè´£ |
|---------|-----|--------|
| **Codex Skill** | 30%+ | æ‰€æœ‰ä»£ç ç”Ÿæˆã€å®¡æŸ¥ã€æµ‹è¯• |
| **Sub-Agents** | 50%+ | ç¼–æ’ã€æ¾„æ¸…ã€è¯„åˆ†ã€æ–‡æ¡£å†™ä½œ |
| **Main Agent** | 20%+ | å·¥ä½œæµåè°ƒã€ä»“åº“æ‰«æã€ç”¨æˆ·äº¤äº’ |

---

## ğŸ¯ æœªæ˜ç¡®çš„æ­¥éª¤

ç›®å‰**æ²¡æœ‰å‘ç°**æ˜ç¡®æœªå®šä¹‰çš„æ­¥éª¤ã€‚æ‰€æœ‰å·¥ä½œæµéƒ½æœ‰æ¸…æ™°çš„æ‰§è¡Œæ–¹å¼ï¼š

1. âœ… éœ€æ±‚ç”Ÿæˆ â†’ Sub-Agent `requirements-generate`
2. âœ… ä»£ç å®ç° â†’ Codexï¼ˆç”± `requirements-code` ç¼–æ’ï¼‰
3. âœ… ä»£ç å®¡æŸ¥ â†’ Codexï¼ˆç”± `requirements-review` ç¼–æ’ï¼‰
4. âœ… æµ‹è¯•éªŒè¯ â†’ Codexï¼ˆç”± `requirements-testing` ç¼–æ’ï¼‰
5. âœ… é”™è¯¯ä¿®å¤ â†’ Codexï¼ˆç”± `bugfix` ç¼–æ’ï¼‰
6. âœ… ä¿®å¤éªŒè¯ â†’ Codexï¼ˆç”± `bugfix-verify` ç¼–æ’ï¼‰

---

## âš™ï¸ æŠ€æœ¯ç»†èŠ‚

### Codex è°ƒç”¨æ–¹å¼

```bash
uv run ~/.claude/skills/codex/scripts/codex.py "<prompt>" [model] [workdir]
```

**å‚æ•°**:
- `task` (å¿…éœ€): ä»»åŠ¡æè¿°ï¼Œæ”¯æŒ `@file` å¼•ç”¨
- `model` (å¯é€‰): é»˜è®¤ `gpt-5.1-codex-max`ï¼›å¯é€‰ `gpt-5.1`
- `working_dir` (å¯é€‰): å·¥ä½œç›®å½•

**è¶…æ—¶æ§åˆ¶**:
- é»˜è®¤: 2 å°æ—¶ (7200000ms)
- é€šè¿‡ `CODEX_TIMEOUT` ç¯å¢ƒå˜é‡è¦†ç›–
- Bash å·¥å…·å¿…é¡»è®¾ç½® `timeout: 7200000`

### ä¿¡æ¯ä¼ é€’æ–¹å¼

- ä½¿ç”¨ `@path` è¯­æ³•é™„åŠ ç›®å½•ï¼ˆæ¨èï¼‰
- åŒ…å« `.claude/specs/{feature}/` æ‰€æœ‰è§„èŒƒæ–‡æ¡£
- è¯·æ±‚ `git status --short` å’Œ `git diff --stat`
- åŒ…å« per-file notesï¼ˆè·¯å¾„ã€çŠ¶æ€ã€æ‘˜è¦ï¼‰

---

## ğŸ“Œ å·¥ä½œæµå…³é”®æ£€æŸ¥æ¸…å•

### Requirements-Pilot è´¨é‡é—¨æ§

- [ ] éœ€æ±‚æ–‡æ¡£è¯„åˆ† â‰¥90/100
- [ ] ç”¨æˆ·æ˜ç¡®ç¡®è®¤éœ€æ±‚
- [ ] æ¶æ„éª¨æ¶ç”¨æˆ·å·²æ‰¹å‡†
- [ ] æ¶æ„æ–‡æ¡£è¯„åˆ† â‰¥90/100ï¼ˆCodex æ‰©å†™åï¼‰
- [ ] ç”¨æˆ·æ˜ç¡®ç¡®è®¤æ¶æ„
- [ ] Codex å®ç°å®Œæˆï¼Œäº§å‡º `codex-backend.md`
- [ ] Codex ä»£ç å®¡æŸ¥å®Œæˆï¼Œâ‰¤3 æ¬¡è¿­ä»£
- [ ] æµ‹è¯•é€šè¿‡ï¼ˆæˆ–è·³è¿‡ï¼‰
- [ ] æ‰€æœ‰äº§ç‰©å®Œæ•´ï¼ŒStructured Summary çŠ¶æ€é `failed`

### Bugfix è´¨é‡é—¨æ§

- [ ] é—®é¢˜èŒƒå›´æ˜ç¡®
- [ ] Codex ä¿®å¤å®Œæˆï¼Œäº§å‡º `codex-backend.md`
- [ ] Codex éªŒè¯å®Œæˆï¼Œâ‰¤3 æ¬¡è¿­ä»£
- [ ] æµ‹è¯•é€šè¿‡ï¼ˆæˆ–è·³è¿‡ï¼‰
- [ ] Structured Summary çŠ¶æ€é `failed`
- [ ] æ‰€æœ‰äº§ç‰©å®Œæ•´

---

## ğŸ“– ç›¸å…³æ–‡ä»¶ä½ç½®

| æ–‡ä»¶ | ä½ç½® | ç”¨é€” |
|-----|------|------|
| å·¥ä½œæµè§„èŒƒ | `/commands/requirements-pilot.md` | Requirements-Pilot å…¥å£å‘½ä»¤ |
| å·¥ä½œæµè§„èŒƒ | `/commands/bugfix.md` | Bugfix å…¥å£å‘½ä»¤ |
| Sub-Agent: éœ€æ±‚ç”Ÿæˆ | `/agents/requirements-generate.md` | éœ€æ±‚æ–‡æ¡£ç¼–å†™å’Œè¯„åˆ† |
| Sub-Agent: ä»£ç ç¼–æ’ | `/agents/requirements-code.md` | Codex ä»£ç å®ç°ç¼–æ’ |
| Sub-Agent: å®¡æŸ¥ç¼–æ’ | `/agents/requirements-review.md` | Codex ä»£ç å®¡æŸ¥ç¼–æ’ |
| Sub-Agent: æµ‹è¯•ç¼–æ’ | `/agents/requirements-testing.md` | Codex æµ‹è¯•ç¼–æ’ |
| Sub-Agent: ä¿®å¤ | `/agents/bugfix.md` | Bugfix é—®é¢˜åˆ†æå’Œç¼–æ’ |
| Sub-Agent: éªŒè¯ | `/agents/bugfix-verify.md` | Bugfix ä¿®å¤éªŒè¯ç¼–æ’ |
| Codex Skill | `/skills/codex/SKILL.md` | Codex CLI é›†æˆæ–‡æ¡£ |
| æ ¸å¿ƒè§„åˆ™ | `/CLAUDE.md` | Agent è¾¹ç•Œå’Œ Codex é›†æˆè§„åˆ™ |
| é¡¹ç›®æ¦‚è§ˆ | `/README.md` | é¡¹ç›®å®Œæ•´æ–‡æ¡£ |

---

## ğŸš€ å¿«é€Ÿå‚è€ƒ

### å¯åŠ¨ Requirements-Pilot

```bash
/requirements-pilot "å®ç°ç”¨æˆ·è®¤è¯ç³»ç»Ÿ"
```

æµç¨‹è‡ªåŠ¨åŒ–ï¼š
1. ä»“åº“æ‰«æ
2. éœ€æ±‚æ¾„æ¸… & æ–‡æ¡£ï¼ˆâ‰¥90åˆ†ï¼‰
3. æ¶æ„è®¾è®¡ & æ–‡æ¡£ï¼ˆâ‰¥90åˆ†ï¼‰
4. Codex ä»£ç å®ç°
5. Codex ä»£ç å®¡æŸ¥
6. Codex æµ‹è¯•éªŒè¯
7. å®Œæˆ

### å¯åŠ¨ Bugfix

```bash
/bugfix "ç™»å½•æ—¶è¿”å› 500 é”™è¯¯"
```

æµç¨‹è‡ªåŠ¨åŒ–ï¼š
1. ä»“åº“æ‰«æ & é—®é¢˜ç¡®è®¤
2. Codex ä¿®å¤å®ç°
3. Codex ä¿®å¤éªŒè¯
4. Codex æµ‹è¯•éªŒè¯
5. å®Œæˆ

---

**æŠ¥å‘Šå®Œæˆ** âœ…
æœ¬æŠ¥å‘Šå±•ç¤ºäº†å®Œæ•´çš„å·¥ä½œæµæ‰§è¡Œæ¶æ„ã€æƒé™åˆ†é…å’Œäº§ç‰©è§„èŒƒã€‚æ‰€æœ‰æ­¥éª¤éƒ½æœ‰æ˜ç¡®çš„æ‰§è¡Œæ–¹å¼å’Œè´£ä»»äººã€‚
